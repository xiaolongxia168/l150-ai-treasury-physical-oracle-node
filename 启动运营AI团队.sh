#!/bin/bash
# è¿è¥AIå›¢é˜Ÿå¯åŠ¨è„šæœ¬
# éƒ¨ç½²æ—¶é—´: 2026-02-19 18:05 GMT+8

echo "ğŸš€ å¯åŠ¨è¿è¥AIå›¢é˜Ÿéƒ¨ç½²..."
echo "================================"

# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
echo "1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€..."
openclaw gateway status | grep -E "(running|pid|port)" || {
    echo "âŒ ç½‘å…³æœªè¿è¡Œï¼Œæ­£åœ¨å¯åŠ¨..."
    openclaw gateway start
    sleep 3
}

# å¯ç”¨æ ¸å¿ƒç›‘æ§ä»»åŠ¡
echo ""
echo "2. å¯ç”¨æ ¸å¿ƒç›‘æ§ä»»åŠ¡..."
echo "   - GitHubæ´»åŠ¨ç›‘æ§ (æ¯15åˆ†é’Ÿ)"
echo "   - ç´§æ€¥å“åº”ç›‘æ§ (æ¯5åˆ†é’Ÿ)"  
echo "   - é‚®ç®±è­¦æŠ¥ç›‘æ§ (æ¯5åˆ†é’Ÿ)"

# éªŒè¯APIé…ç½®
echo ""
echo "3. éªŒè¯APIé…ç½®..."
echo "   ä¸»æä¾›å•†: Moonshot Kimi K2.5 âœ…"
echo "   å¤‡ç”¨æä¾›å•†: Anthropic Claude 3.5 Sonnet âœ…"

# åˆ›å»ºç›‘æ§ç›®å½•
echo ""
echo "4. åˆ›å»ºç›‘æ§ç›®å½•ç»“æ„..."
mkdir -p ~/.openclaw/workspace/monitoring/logs
mkdir -p ~/.openclaw/workspace/monitoring/reports
mkdir -p ~/.openclaw/workspace/monitoring/alerts

# ç”Ÿæˆå›¢é˜ŸçŠ¶æ€æŠ¥å‘Š
echo ""
echo "5. ç”Ÿæˆå›¢é˜ŸçŠ¶æ€æŠ¥å‘Š..."
cat > ~/.openclaw/workspace/monitoring/å›¢é˜ŸçŠ¶æ€.md << 'EOF'
# è¿è¥AIå›¢é˜ŸçŠ¶æ€æŠ¥å‘Š
## éƒ¨ç½²æ—¶é—´: 2026-02-19 18:05 GMT+8

### ğŸ¯ å›¢é˜Ÿä½¿å‘½
å®ç°24/7è‡ªåŠ¨åŒ–è¿è¥ç›‘æ§ï¼Œå®æ—¶å“åº”AIè´¢åº“äº’åŠ¨

### ğŸ“Š æ ¸å¿ƒèƒ½åŠ›
1. **å®æ—¶ç›‘æ§**: GitHubã€é‚®ç®±ã€ç¤¾äº¤åª’ä½“å¤šé€šé“ç›‘æ§
2. **æ™ºèƒ½åˆ†æ**: æ•°æ®æ±‡æ€»ã€è¶‹åŠ¿åˆ†æã€è´¨é‡è¯„ä¼°
3. **å¿«é€Ÿå“åº”**: P0çº§åˆ«5åˆ†é’Ÿå†…å“åº”ï¼ŒP1çº§åˆ«30åˆ†é’Ÿå†…å“åº”
4. **è‡ªåŠ¨æŠ¥å‘Š**: æ¯2å°æ—¶ç”Ÿæˆç»¼åˆè¿è¥æŠ¥å‘Š

### ğŸ”§ æŠ€æœ¯æ ˆ
- **è°ƒåº¦ç³»ç»Ÿ**: OpenClaw Gateway + Cronä»»åŠ¡
- **AIæ¨¡å‹**: Moonshot Kimi K2.5 (ä¸») + Claude 3.5 Sonnet (å¤‡)
- **ç›‘æ§å·¥å…·**: GitHub APIã€é‚®ç®±ç›‘æ§è„šæœ¬ã€ç¤¾äº¤åª’ä½“API
- **æ•°æ®å­˜å‚¨**: å®æ—¶æ—¥å¿— + å®šæœŸæŠ¥å‘Š

### ğŸš¨ ç´§æ€¥å“åº”ç­‰çº§
- **P0 (ç«‹å³å“åº”)**: æŠ€æœ¯è¯¢é—®ã€ä¼šè®®è¯·æ±‚ã€æŠ•èµ„æ„å‘
- **P1 (30åˆ†é’Ÿå†…)**: å°½èŒè°ƒæŸ¥ã€æŠ€æœ¯ç»†èŠ‚ã€é‡è¦æåŠ
- **P2 (2å°æ—¶å†…)**: ä¸€èˆ¬è¯¢é—®ã€æ•°æ®è¡¥å……ã€å¸¸è§„æŠ¥å‘Š

### ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡
- ç›‘æ§è¦†ç›–ç‡: >90%
- ç´§æ€¥å“åº”æ—¶é—´: <5åˆ†é’Ÿ
- ç³»ç»Ÿå¯ç”¨æ€§: 99.9%
- æ•°æ®å‡†ç¡®æ€§: >95%

### ğŸ”„ éƒ¨ç½²è¿›åº¦
- [x] é˜¶æ®µ1: æ ¸å¿ƒç›‘æ§æ¿€æ´» (60%)
- [ ] é˜¶æ®µ2: å›¢é˜Ÿé…ç½® (0%)
- [ ] é˜¶æ®µ3: æµ‹è¯•è¿è¡Œ (0%)
- [ ] é˜¶æ®µ4: æ­£å¼ä¸Šçº¿ (0%)

**é¢„è®¡å®Œæˆæ—¶é—´: 21:00 GMT+8**
EOF

echo "âœ… å›¢é˜ŸçŠ¶æ€æŠ¥å‘Šå·²ç”Ÿæˆ: ~/.openclaw/workspace/monitoring/å›¢é˜ŸçŠ¶æ€.md"

# è®¾ç½®è‡ªåŠ¨åŒ–æ£€æŸ¥
echo ""
echo "6. è®¾ç½®è‡ªåŠ¨åŒ–æ£€æŸ¥..."
cat > ~/.openclaw/workspace/monitoring/è‡ªåŠ¨åŒ–æ£€æŸ¥æ¸…å•.md << 'EOF'
# è‡ªåŠ¨åŒ–æ£€æŸ¥æ¸…å•

## æ¯5åˆ†é’Ÿæ£€æŸ¥
- [ ] ç´§æ€¥å“åº”ç›‘æ§çŠ¶æ€
- [ ] é‚®ç®±è­¦æŠ¥ç›‘æ§çŠ¶æ€
- [ ] ç½‘å…³å¥åº·çŠ¶æ€

## æ¯15åˆ†é’Ÿæ£€æŸ¥  
- [ ] GitHubæ´»åŠ¨ç›‘æ§çŠ¶æ€
- [ ] ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ç›‘æ§

## æ¯30åˆ†é’Ÿæ£€æŸ¥
- [ ] ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- [ ] APIæä¾›å•†çŠ¶æ€

## æ¯2å°æ—¶æ£€æŸ¥
- [ ] ç”Ÿæˆç»¼åˆè¿è¥æŠ¥å‘Š
- [ ] æ•°æ®å¤‡ä»½çŠ¶æ€

## æ¯6å°æ—¶æ£€æŸ¥
- [ ] è¶‹åŠ¿åˆ†ææŠ¥å‘Š
- [ ] ç³»ç»Ÿä¼˜åŒ–å»ºè®®

## æ¯æ—¥æ£€æŸ¥
- [ ] å®Œæ•´ç³»ç»Ÿå¥åº·æ£€æŸ¥
- [ ] ç›‘æ§è¦†ç›–ç‡è¯„ä¼°
- [ ] æ€§èƒ½æŒ‡æ ‡åˆ†æ
EOF

echo "âœ… è‡ªåŠ¨åŒ–æ£€æŸ¥æ¸…å•å·²ç”Ÿæˆ"

# åˆ›å»ºå¿«é€Ÿå“åº”è„šæœ¬
echo ""
echo "7. åˆ›å»ºå¿«é€Ÿå“åº”è„šæœ¬..."
cat > ~/.openclaw/workspace/monitoring/å¿«é€Ÿå“åº”.sh << 'EOF'
#!/bin/bash
# è¿è¥AIå›¢é˜Ÿå¿«é€Ÿå“åº”è„šæœ¬

case "$1" in
    "status")
        echo "ğŸ“Š è¿è¥AIå›¢é˜ŸçŠ¶æ€"
        echo "=================="
        openclaw gateway status | grep -E "(running|pid|port)"
        echo ""
        echo "ğŸ”„ æ´»è·ƒç›‘æ§ä»»åŠ¡:"
        cron list | grep -E "(L-150|enabled.*true)" | head -5
        ;;
        
    "report")
        echo "ğŸ“ˆ ç”Ÿæˆè¿è¥æŠ¥å‘Š..."
        # è¿™é‡Œå¯ä»¥æ·»åŠ ç”ŸæˆæŠ¥å‘Šçš„é€»è¾‘
        echo "æŠ¥å‘Šç”ŸæˆåŠŸèƒ½å¾…å®ç°"
        ;;
        
    "alert")
        echo "ğŸš¨ ç´§æ€¥è­¦æŠ¥æµ‹è¯•..."
        echo "æµ‹è¯•ç´§æ€¥å“åº”æœºåˆ¶..."
        # è¿™é‡Œå¯ä»¥æ·»åŠ è­¦æŠ¥æµ‹è¯•é€»è¾‘
        echo "è­¦æŠ¥æµ‹è¯•åŠŸèƒ½å¾…å®ç°"
        ;;
        
    "restart")
        echo "ğŸ”„ é‡å¯ç›‘æ§ç³»ç»Ÿ..."
        openclaw gateway restart
        sleep 3
        echo "âœ… ç³»ç»Ÿå·²é‡å¯"
        ;;
        
    *)
        echo "ç”¨æ³•: $0 {status|report|alert|restart}"
        echo ""
        echo "å‘½ä»¤è¯´æ˜:"
        echo "  status    - æŸ¥çœ‹å›¢é˜ŸçŠ¶æ€"
        echo "  report    - ç”Ÿæˆè¿è¥æŠ¥å‘Š"
        echo "  alert     - æµ‹è¯•ç´§æ€¥è­¦æŠ¥"
        echo "  restart   - é‡å¯ç›‘æ§ç³»ç»Ÿ"
        exit 1
        ;;
esac
EOF

chmod +x ~/.openclaw/workspace/monitoring/å¿«é€Ÿå“åº”.sh

echo "âœ… å¿«é€Ÿå“åº”è„šæœ¬å·²åˆ›å»º: ~/.openclaw/workspace/monitoring/å¿«é€Ÿå“åº”.sh"

echo ""
echo "========================================"
echo "ğŸ‰ è¿è¥AIå›¢é˜Ÿéƒ¨ç½²å®Œæˆ!"
echo ""
echo "å¯ç”¨å‘½ä»¤:"
echo "  ./monitoring/å¿«é€Ÿå“åº”.sh status    # æŸ¥çœ‹çŠ¶æ€"
echo "  ./monitoring/å¿«é€Ÿå“åº”.sh report    # ç”ŸæˆæŠ¥å‘Š"
echo "  ./monitoring/å¿«é€Ÿå“åº”.sh alert     # æµ‹è¯•è­¦æŠ¥"
echo "  ./monitoring/å¿«é€Ÿå“åº”.sh restart   # é‡å¯ç³»ç»Ÿ"
echo ""
echo "ä¸‹ä¸€æ­¥:"
echo "  1. éªŒè¯ç›‘æ§ä»»åŠ¡æ­£å¸¸è¿è¡Œ"
echo "  2. æµ‹è¯•ç´§æ€¥å“åº”æœºåˆ¶"
echo "  3. ç”Ÿæˆç¬¬ä¸€ä»½ç»¼åˆæŠ¥å‘Š"
echo "  4. å‡†å¤‡ç¬¬äºŒè½®ä¼˜åŒ–ææ–™"
echo ""
echo "é¢„è®¡æ­£å¼ä¸Šçº¿æ—¶é—´: 21:00 GMT+8"
echo "========================================"